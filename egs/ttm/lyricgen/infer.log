Exprimental Configuration File: egs/ttm/lyricgen/exp_config_chinese.json
egs/ttm/lyricgen/run.sh: line 126: waveform: command not found
The following values were not passed to `accelerate launch` and had defaults used instead:
	`--num_processes` was set to a value of `1`
	`--num_machines` was set to a value of `1`
	`--mixed_precision` was set to a value of `'no'`
	`--dynamo_backend` was set to a value of `'no'`
To avoid this warning pass in values for each of the problematic parameters or run `accelerate config`.
2024-04-13 13:30:44,051 : ==========================New Starting Here==============================
2024-04-13 13:30:49,246 : Compression model has 4 codebooks with 2048 cardinality, and a framerate of 50
2024-04-13 13:30:51,651 : Initializing accelerate...
Detected kernel version 3.10.0, which is below the recommended minimum of 5.5.0; this can cause the process to hang. It is recommended to upgrade the kernel to the minimum version or higher.
2024-04-13 13:30:51,667 : Initializing accelerate done in 15.487ms
2024-04-13 13:30:51,667 : Loading checkpoint...
2024-04-13 13:30:53,276 : Load checkpoint from ckpts/ttm/lyric2song_chinese/checkpoint/epoch-0100_step-0000404_loss-0.032743
2024-04-13 13:30:53,276 : Loading checkpoint done in 1609.243ms
args:  Namespace(config='egs/ttm/lyricgen/exp_config_chinese.json', text='/home/wangyuancheng.p/zja/Amphion/ckpts/ttm/lyric2song_chinese/debug_train_sample/infer_text', waveform='', infer_expt_dir='ckpts/ttm/lyric2song_chinese', output_dir='ckpts/ttm/lyric2song_chinese/result', file_list=True, mix=False, local_rank=device(type='cuda'))
Generating:   0%|          | 0/8 [00:00<?, ?it/s]Generating:   0%|          | 0/8 [00:00<?, ?it/s]
['是什么让你这样迷恋这样的放肆\\n我像是一个你可有可无的影子\\n和寂寞交换着悲伤的心事\\n对爱无计可施']
None
Traceback (most recent call last):
  File "/home/wangyuancheng.p/zja/Amphion/bins/ttm/inference.py", line 98, in <module>
    main()
  File "/home/wangyuancheng.p/zja/Amphion/bins/ttm/inference.py", line 94, in main
    inferencer.inference()
  File "/home/wangyuancheng.p/zja/Amphion/models/ttm/musicgen/musicgen_inference.py", line 366, in inference
    audios.extend(self.generate(batch_text, waveforms))
  File "/home/wangyuancheng.p/zja/Amphion/models/ttm/musicgen/musicgen_inference.py", line 223, in generate
    tokens = self._generate_tokens(attributes, prompt_tokens, progress)
  File "/home/wangyuancheng.p/zja/Amphion/models/ttm/musicgen/musicgen_inference.py", line 262, in _generate_tokens
    gen_tokens = self.model.generate(
  File "/home/wangyuancheng.p/miniconda3/envs/amphion_music/lib/python3.9/site-packages/torch/utils/_contextlib.py", line 115, in decorate_context
    return func(*args, **kwargs)
  File "/home/wangyuancheng.p/zja/Amphion/modules/audiocraft/models/lm.py", line 555, in generate
    tokenized = self.condition_provider.tokenize(conditions)
  File "/home/wangyuancheng.p/zja/Amphion/modules/audiocraft/modules/conditioners.py", line 1625, in tokenize
    text = self._collate_text(inputs)
  File "/home/wangyuancheng.p/zja/Amphion/modules/audiocraft/modules/conditioners.py", line 1684, in _collate_text
    out[condition].append(text[condition])
KeyError: 'lyric'
Traceback (most recent call last):
  File "/home/wangyuancheng.p/miniconda3/envs/amphion_music/bin/accelerate", line 8, in <module>
    sys.exit(main())
  File "/home/wangyuancheng.p/miniconda3/envs/amphion_music/lib/python3.9/site-packages/accelerate/commands/accelerate_cli.py", line 47, in main
    args.func(args)
  File "/home/wangyuancheng.p/miniconda3/envs/amphion_music/lib/python3.9/site-packages/accelerate/commands/launch.py", line 994, in launch_command
    simple_launcher(args)
  File "/home/wangyuancheng.p/miniconda3/envs/amphion_music/lib/python3.9/site-packages/accelerate/commands/launch.py", line 636, in simple_launcher
    raise subprocess.CalledProcessError(returncode=process.returncode, cmd=cmd)
subprocess.CalledProcessError: Command '['/home/wangyuancheng.p/miniconda3/envs/amphion_music/bin/python', '/home/wangyuancheng.p/zja/Amphion/bins/ttm/inference.py', '--config', 'egs/ttm/lyricgen/exp_config_chinese.json', '--infer_expt_dir', 'ckpts/ttm/lyric2song_chinese', '--output_dir', 'ckpts/ttm/lyric2song_chinese/result', '--text=/home/wangyuancheng.p/zja/Amphion/ckpts/ttm/lyric2song_chinese/debug_train_sample/infer_text', '--waveform=', '--file_list']' returned non-zero exit status 1.
Exprimental Configuration File: egs/ttm/lyricgen/exp_config_chinese.json
egs/ttm/lyricgen/run.sh: line 126: waveform: command not found
The following values were not passed to `accelerate launch` and had defaults used instead:
	`--num_processes` was set to a value of `1`
	`--num_machines` was set to a value of `1`
	`--mixed_precision` was set to a value of `'no'`
	`--dynamo_backend` was set to a value of `'no'`
To avoid this warning pass in values for each of the problematic parameters or run `accelerate config`.
2024-04-13 13:32:29,058 : ==========================New Starting Here==============================
2024-04-13 13:32:34,407 : Compression model has 4 codebooks with 2048 cardinality, and a framerate of 50
2024-04-13 13:32:36,758 : Initializing accelerate...
Detected kernel version 3.10.0, which is below the recommended minimum of 5.5.0; this can cause the process to hang. It is recommended to upgrade the kernel to the minimum version or higher.
2024-04-13 13:32:36,774 : Initializing accelerate done in 16.071ms
2024-04-13 13:32:36,774 : Loading checkpoint...
2024-04-13 13:32:38,450 : Load checkpoint from ckpts/ttm/lyric2song_chinese/checkpoint/epoch-0120_step-0000484_loss-0.024658
2024-04-13 13:32:38,450 : Loading checkpoint done in 1675.658ms
args:  Namespace(config='egs/ttm/lyricgen/exp_config_chinese.json', text='/home/wangyuancheng.p/zja/Amphion/ckpts/ttm/lyric2song_chinese/debug_train_sample/infer_text', waveform='', infer_expt_dir='ckpts/ttm/lyric2song_chinese', output_dir='ckpts/ttm/lyric2song_chinese/result', file_list=True, mix=False, local_rank=device(type='cuda'))
Generating:   0%|          | 0/8 [00:00<?, ?it/s]Generating:  12%|█▎        | 1/8 [01:10<08:10, 70.08s/it]Generating:  25%|██▌       | 2/8 [02:14<06:39, 66.61s/it]Traceback (most recent call last):
  File "/home/wangyuancheng.p/miniconda3/envs/amphion_music/bin/accelerate", line 8, in <module>
    sys.exit(main())
  File "/home/wangyuancheng.p/miniconda3/envs/amphion_music/lib/python3.9/site-packages/accelerate/commands/accelerate_cli.py", line 47, in main
    args.func(args)
  File "/home/wangyuancheng.p/miniconda3/envs/amphion_music/lib/python3.9/site-packages/accelerate/commands/launch.py", line 994, in launch_command
    simple_launcher(args)
  File "/home/wangyuancheng.p/miniconda3/envs/amphion_music/lib/python3.9/site-packages/accelerate/commands/launch.py", line 636, in simple_launcher
    raise subprocess.CalledProcessError(returncode=process.returncode, cmd=cmd)
subprocess.CalledProcessError: Command '['/home/wangyuancheng.p/miniconda3/envs/amphion_music/bin/python', '/home/wangyuancheng.p/zja/Amphion/bins/ttm/inference.py', '--config', 'egs/ttm/lyricgen/exp_config_chinese.json', '--infer_expt_dir', 'ckpts/ttm/lyric2song_chinese', '--output_dir', 'ckpts/ttm/lyric2song_chinese/result', '--text=/home/wangyuancheng.p/zja/Amphion/ckpts/ttm/lyric2song_chinese/debug_train_sample/infer_text', '--waveform=', '--file_list']' died with <Signals.SIGTERM: 15>.
Exprimental Configuration File: egs/ttm/lyricgen/exp_config_chinese.json
egs/ttm/lyricgen/run.sh: line 126: waveform: command not found
The following values were not passed to `accelerate launch` and had defaults used instead:
	`--num_processes` was set to a value of `1`
	`--num_machines` was set to a value of `1`
	`--mixed_precision` was set to a value of `'no'`
	`--dynamo_backend` was set to a value of `'no'`
To avoid this warning pass in values for each of the problematic parameters or run `accelerate config`.
2024-04-13 13:35:53,432 : ==========================New Starting Here==============================
2024-04-13 13:35:58,646 : Compression model has 4 codebooks with 2048 cardinality, and a framerate of 50
2024-04-13 13:36:00,983 : Initializing accelerate...
Detected kernel version 3.10.0, which is below the recommended minimum of 5.5.0; this can cause the process to hang. It is recommended to upgrade the kernel to the minimum version or higher.
2024-04-13 13:36:00,999 : Initializing accelerate done in 15.970ms
2024-04-13 13:36:00,999 : Loading checkpoint...
2024-04-13 13:36:02,620 : Load checkpoint from ckpts/ttm/lyric2song_chinese/checkpoint/epoch-0150_step-0000604_loss-0.014454
2024-04-13 13:36:02,620 : Loading checkpoint done in 1621.155ms
args:  Namespace(config='egs/ttm/lyricgen/exp_config_chinese.json', text='/home/wangyuancheng.p/zja/Amphion/ckpts/ttm/lyric2song_chinese/debug_train_sample/infer_text', waveform='', infer_expt_dir='ckpts/ttm/lyric2song_chinese', output_dir='ckpts/ttm/lyric2song_chinese/result', file_list=True, mix=False, local_rank=device(type='cuda'))
Generating:   0%|          | 0/2 [00:00<?, ?it/s]Generating:  50%|█████     | 1/2 [01:09<01:09, 69.80s/it]Generating: 100%|██████████| 2/2 [02:10<00:00, 64.24s/it]Generating: 100%|██████████| 2/2 [02:10<00:00, 65.07s/it]
['味道香甜软酥糯\\n生煎馒头蟹壳黄\\n老虎脚爪绞连棒\\n千层饼、蛋棉衣\\n大饼油条豆腐浆\\n葱油花卷葱油饼\\n经济实惠侪欣赏\\n香菇菜包豆沙包']
None
['时间仿佛被谁下了咒\\n渲染出你的眼眸\\n那可是清澈的 明亮的 喜悦的\\n又或是湿润的 倔强的 不甘的\\n却还是斑斓的 柔软的 璀璨的']
None
Exprimental Configuration File: egs/ttm/lyricgen/exp_config_chinese.json
egs/ttm/lyricgen/run.sh: line 126: waveform: command not found
The following values were not passed to `accelerate launch` and had defaults used instead:
	`--num_processes` was set to a value of `1`
	`--num_machines` was set to a value of `1`
	`--mixed_precision` was set to a value of `'no'`
	`--dynamo_backend` was set to a value of `'no'`
To avoid this warning pass in values for each of the problematic parameters or run `accelerate config`.
2024-04-13 13:40:48,704 : ==========================New Starting Here==============================
2024-04-13 13:40:53,738 : Compression model has 4 codebooks with 2048 cardinality, and a framerate of 50
2024-04-13 13:40:56,248 : Initializing accelerate...
Detected kernel version 3.10.0, which is below the recommended minimum of 5.5.0; this can cause the process to hang. It is recommended to upgrade the kernel to the minimum version or higher.
2024-04-13 13:40:56,264 : Initializing accelerate done in 15.583ms
2024-04-13 13:40:56,264 : Loading checkpoint...
2024-04-13 13:40:58,006 : Load checkpoint from ckpts/ttm/lyric2song_chinese/checkpoint/epoch-0200_step-0000804_loss-0.004926
2024-04-13 13:40:58,006 : Loading checkpoint done in 1741.452ms
args:  Namespace(config='egs/ttm/lyricgen/exp_config_chinese.json', text='/home/wangyuancheng.p/zja/Amphion/ckpts/ttm/lyric2song_chinese/debug_train_sample/infer_text', waveform='', infer_expt_dir='ckpts/ttm/lyric2song_chinese', output_dir='ckpts/ttm/lyric2song_chinese/result', file_list=True, mix=False, local_rank=device(type='cuda'))
Generating:   0%|          | 0/2 [00:00<?, ?it/s]Generating:  50%|█████     | 1/2 [00:45<00:45, 45.88s/it]Generating: 100%|██████████| 2/2 [01:27<00:00, 43.32s/it]Generating: 100%|██████████| 2/2 [01:27<00:00, 43.70s/it]
['味道香甜软酥糯\\n生煎馒头蟹壳黄\\n老虎脚爪绞连棒\\n千层饼、蛋棉衣\\n大饼油条豆腐浆\\n葱油花卷葱油饼\\n经济实惠侪欣赏\\n香菇菜包豆沙包']
None
['时间仿佛被谁下了咒\\n渲染出你的眼眸\\n那可是清澈的 明亮的 喜悦的\\n又或是湿润的 倔强的 不甘的\\n却还是斑斓的 柔软的 璀璨的']
None
Exprimental Configuration File: egs/ttm/lyricgen/exp_config_chinese.json
egs/ttm/lyricgen/run.sh: line 126: waveform: command not found
The following values were not passed to `accelerate launch` and had defaults used instead:
	`--num_processes` was set to a value of `1`
	`--num_machines` was set to a value of `1`
	`--mixed_precision` was set to a value of `'no'`
	`--dynamo_backend` was set to a value of `'no'`
To avoid this warning pass in values for each of the problematic parameters or run `accelerate config`.
2024-04-14 11:20:26,954 : ==========================New Starting Here==============================
2024-04-14 11:20:34,864 : Compression model has 4 codebooks with 2048 cardinality, and a framerate of 50
2024-04-14 11:20:38,446 : Initializing accelerate...
Detected kernel version 3.10.0, which is below the recommended minimum of 5.5.0; this can cause the process to hang. It is recommended to upgrade the kernel to the minimum version or higher.
2024-04-14 11:20:38,462 : Initializing accelerate done in 15.346ms
2024-04-14 11:20:38,462 : Loading checkpoint...
2024-04-14 11:20:41,311 : Load checkpoint from ckpts/ttm/lyric2song_chinese/checkpoint/epoch-0002_step-0014000_loss-5.855574
2024-04-14 11:20:41,312 : Loading checkpoint done in 2849.772ms
args:  Namespace(config='egs/ttm/lyricgen/exp_config_chinese.json', text='/home/wangyuancheng.p/zja/Amphion/ckpts/ttm/lyric2song_chinese/debug_train_sample/infer_text', waveform='', infer_expt_dir='ckpts/ttm/lyric2song_chinese', output_dir='ckpts/ttm/lyric2song_chinese/result', file_list=True, mix=False, local_rank=device(type='cuda'))
['时间仿佛被谁下了咒\\n渲染出你的眼眸\\n那可是清澈的 明亮的 喜悦的\\n又或是湿润的 倔强的 不甘的\\n却还是斑斓的 柔软的 璀璨的']
None
111
Exprimental Configuration File: egs/ttm/lyricgen/exp_config_chinese_debug.json
egs/ttm/lyricgen/run.sh: line 126: waveform: command not found
The following values were not passed to `accelerate launch` and had defaults used instead:
	`--num_processes` was set to a value of `1`
	`--num_machines` was set to a value of `1`
	`--mixed_precision` was set to a value of `'no'`
	`--dynamo_backend` was set to a value of `'no'`
To avoid this warning pass in values for each of the problematic parameters or run `accelerate config`.
2024-04-16 19:11:49,636 : ==========================New Starting Here==============================
2024-04-16 19:11:58,313 : Compression model has 4 codebooks with 2048 cardinality, and a framerate of 50
2024-04-16 19:12:01,369 : Initializing accelerate...
Detected kernel version 3.10.0, which is below the recommended minimum of 5.5.0; this can cause the process to hang. It is recommended to upgrade the kernel to the minimum version or higher.
2024-04-16 19:12:01,380 : Initializing accelerate done in 11.135ms
2024-04-16 19:12:01,381 : Loading checkpoint...
2024-04-16 19:12:02,416 : Load checkpoint from ckpts/ttm/lyric2song_chinese_debug/checkpoint/epoch-0060_step-0000610_loss-0.119556
2024-04-16 19:12:02,416 : Loading checkpoint done in 1035.540ms
args:  Namespace(config='egs/ttm/lyricgen/exp_config_chinese_debug.json', text='/home/wangyuancheng.p/zja/Amphion/ckpts/ttm/lyric2song_chinese_debug/debug_train_sample/infer_text', waveform='', infer_expt_dir='ckpts/ttm/lyric2song_chinese_debug', output_dir='ckpts/ttm/lyric2song_chinese_debug/result', file_list=True, mix=False, local_rank=device(type='cuda'))
Generating:   0%|          | 0/8 [00:00<?, ?it/s]Generating:  12%|█▎        | 1/8 [00:21<02:30, 21.48s/it]Generating:  25%|██▌       | 2/8 [00:41<02:03, 20.61s/it]Generating:  38%|███▊      | 3/8 [01:01<01:41, 20.29s/it]Generating:  50%|█████     | 4/8 [01:21<01:20, 20.21s/it]Generating:  62%|██████▎   | 5/8 [01:41<01:00, 20.08s/it]Generating:  75%|███████▌  | 6/8 [02:01<00:40, 20.04s/it]Generating:  88%|████████▊ | 7/8 [02:21<00:19, 19.97s/it]Generating: 100%|██████████| 8/8 [02:40<00:00, 19.94s/it]Generating: 100%|██████████| 8/8 [02:40<00:00, 20.12s/it]
['一壶漂泊浪迹天涯难入喉\\n你走之后酒暖回忆思念瘦\\n水向东流时间怎么偷']
None
111
['Say\\nthat it′s too late to apologize\\nit′s too late\\nI said it′s too late to apologize\\nit′s too late\\nthat it′s too late to apologize']
None
111
['【唐酱】（泰迪taedie_ss）\\n木兰舟送一灯火\\n一对白头 分来一碟红豆\\n看她接过 低头沉默飞红两朵\\n不敢说破倾心我\\n（袁雨桐)\\n有花千树被吹落']
None
111
['Bow down to the KeyNG\\nEh陆放我们开录了吗\\n我有些问题想要问他\\nCouple Hunnid\\nLet’s get it\\nEh闭上你的嘴巴\\n我是在耶稣之后来的第四个弥赛亚\\n救世主救赎这游戏 揪出犹大\\n站在C位现在我要Go D']
None
111
['知道吗，这里的雨季只有一两天\\n白昼很长，也很短\\n夜晚有三年']
None
111
['风里雨里一直大步往前走\\n我又怎么能够忘掉你的温柔\\n换不同的场景']
None
111
['幸福再来 我依然会充满期待']
None
111
['因为你才让我背对命运不害怕\\n如果可以我想和你回到那天相遇']
None
111
Exprimental Configuration File: egs/ttm/lyricgen/exp_config_chinese_debug.json
egs/ttm/lyricgen/run.sh: line 126: waveform: command not found
The following values were not passed to `accelerate launch` and had defaults used instead:
	`--num_processes` was set to a value of `1`
	`--num_machines` was set to a value of `1`
	`--mixed_precision` was set to a value of `'no'`
	`--dynamo_backend` was set to a value of `'no'`
To avoid this warning pass in values for each of the problematic parameters or run `accelerate config`.
2024-04-16 19:16:32,398 : ==========================New Starting Here==============================
2024-04-16 19:16:38,099 : Compression model has 4 codebooks with 2048 cardinality, and a framerate of 50
2024-04-16 19:16:41,114 : Initializing accelerate...
Detected kernel version 3.10.0, which is below the recommended minimum of 5.5.0; this can cause the process to hang. It is recommended to upgrade the kernel to the minimum version or higher.
2024-04-16 19:16:41,127 : Initializing accelerate done in 12.010ms
2024-04-16 19:16:41,127 : Loading checkpoint...
2024-04-16 19:16:42,096 : Load checkpoint from ckpts/ttm/lyric2song_chinese_debug/checkpoint/epoch-0090_step-0000910_loss-0.028549
2024-04-16 19:16:42,096 : Loading checkpoint done in 968.944ms
args:  Namespace(config='egs/ttm/lyricgen/exp_config_chinese_debug.json', text='/home/wangyuancheng.p/zja/Amphion/ckpts/ttm/lyric2song_chinese_debug/debug_train_sample/infer_text', waveform='', infer_expt_dir='ckpts/ttm/lyric2song_chinese_debug', output_dir='ckpts/ttm/lyric2song_chinese_debug/result', file_list=True, mix=False, local_rank=device(type='cuda'))
Generating:   0%|          | 0/8 [00:00<?, ?it/s]Generating:  12%|█▎        | 1/8 [00:22<02:37, 22.57s/it]Generating:  25%|██▌       | 2/8 [00:43<02:08, 21.43s/it]Generating:  38%|███▊      | 3/8 [01:03<01:43, 20.75s/it]Generating:  50%|█████     | 4/8 [01:23<01:21, 20.49s/it]Generating:  62%|██████▎   | 5/8 [01:43<01:00, 20.28s/it]Generating:  75%|███████▌  | 6/8 [02:03<00:40, 20.17s/it]Generating:  88%|████████▊ | 7/8 [02:22<00:20, 20.07s/it]Generating: 100%|██████████| 8/8 [02:42<00:00, 20.01s/it]Generating: 100%|██████████| 8/8 [02:42<00:00, 20.35s/it]
['一壶漂泊浪迹天涯难入喉\\n你走之后酒暖回忆思念瘦\\n水向东流时间怎么偷']
None
111
['Say\\nthat it′s too late to apologize\\nit′s too late\\nI said it′s too late to apologize\\nit′s too late\\nthat it′s too late to apologize']
None
111
['【唐酱】（泰迪taedie_ss）\\n木兰舟送一灯火\\n一对白头 分来一碟红豆\\n看她接过 低头沉默飞红两朵\\n不敢说破倾心我\\n（袁雨桐)\\n有花千树被吹落']
None
111
['Bow down to the KeyNG\\nEh陆放我们开录了吗\\n我有些问题想要问他\\nCouple Hunnid\\nLet’s get it\\nEh闭上你的嘴巴\\n我是在耶稣之后来的第四个弥赛亚\\n救世主救赎这游戏 揪出犹大\\n站在C位现在我要Go D']
None
111
['知道吗，这里的雨季只有一两天\\n白昼很长，也很短\\n夜晚有三年']
None
111
['风里雨里一直大步往前走\\n我又怎么能够忘掉你的温柔\\n换不同的场景']
None
111
['幸福再来 我依然会充满期待']
None
111
['因为你才让我背对命运不害怕\\n如果可以我想和你回到那天相遇']
None
111
Exprimental Configuration File: egs/ttm/lyricgen/exp_config_chinese.json
egs/ttm/lyricgen/run.sh: line 126: waveform: command not found
The following values were not passed to `accelerate launch` and had defaults used instead:
	`--num_processes` was set to a value of `1`
	`--num_machines` was set to a value of `1`
	`--mixed_precision` was set to a value of `'no'`
	`--dynamo_backend` was set to a value of `'no'`
To avoid this warning pass in values for each of the problematic parameters or run `accelerate config`.
Traceback (most recent call last):
  File "/home/wangyuancheng.p/zja/Amphion/bins/ttm/inference.py", line 10, in <module>
    from models.ttm.musicgen.musicgen_inference import MusicGenInference
  File "/home/wangyuancheng.p/zja/Amphion/models/ttm/musicgen/musicgen_inference.py", line 7, in <module>
    import modules.audiocraft.solvers.builders as builders
  File "/home/wangyuancheng.p/zja/Amphion/modules/audiocraft/__init__.py", line 24, in <module>
    from . import data, modules, models
  File "/home/wangyuancheng.p/zja/Amphion/modules/audiocraft/data/__init__.py", line 10, in <module>
    from . import audio, audio_dataset, info_audio_dataset, music_dataset, sound_dataset
  File "/home/wangyuancheng.p/zja/Amphion/modules/audiocraft/data/audio.py", line 22, in <module>
    import av
ModuleNotFoundError: No module named 'av'
Traceback (most recent call last):
  File "/home/wangyuancheng.p/miniconda3/envs/amphion/bin/accelerate", line 8, in <module>
    sys.exit(main())
  File "/home/wangyuancheng.p/miniconda3/envs/amphion/lib/python3.9/site-packages/accelerate/commands/accelerate_cli.py", line 47, in main
    args.func(args)
  File "/home/wangyuancheng.p/miniconda3/envs/amphion/lib/python3.9/site-packages/accelerate/commands/launch.py", line 994, in launch_command
    simple_launcher(args)
  File "/home/wangyuancheng.p/miniconda3/envs/amphion/lib/python3.9/site-packages/accelerate/commands/launch.py", line 636, in simple_launcher
    raise subprocess.CalledProcessError(returncode=process.returncode, cmd=cmd)
subprocess.CalledProcessError: Command '['/home/wangyuancheng.p/miniconda3/envs/amphion/bin/python', '/home/wangyuancheng.p/zja/Amphion/bins/ttm/inference.py', '--config', 'egs/ttm/lyricgen/exp_config_chinese.json', '--infer_expt_dir', 'ckpts/ttm/lyric2song_chinese', '--output_dir', 'ckpts/ttm/lyric2song_chinese/result', '--text=/home/wangyuancheng.p/zja/Amphion/ckpts/ttm/lyric2song_chinese/debug_train_sample/info.txt', '--waveform=', '--file_list']' returned non-zero exit status 1.
Exprimental Configuration File: egs/ttm/lyricgen/exp_config_chinese.json
egs/ttm/lyricgen/run.sh: line 126: waveform: command not found
The following values were not passed to `accelerate launch` and had defaults used instead:
	`--num_processes` was set to a value of `1`
	`--num_machines` was set to a value of `1`
	`--mixed_precision` was set to a value of `'no'`
	`--dynamo_backend` was set to a value of `'no'`
To avoid this warning pass in values for each of the problematic parameters or run `accelerate config`.
2024-04-23 11:43:38,966 : ==========================New Starting Here==============================
2024-04-23 11:43:45,354 : Compression model has 4 codebooks with 2048 cardinality, and a framerate of 50
2024-04-23 11:43:49,812 : Initializing accelerate...
Detected kernel version 3.10.0, which is below the recommended minimum of 5.5.0; this can cause the process to hang. It is recommended to upgrade the kernel to the minimum version or higher.
2024-04-23 11:43:49,827 : Initializing accelerate done in 14.201ms
2024-04-23 11:43:49,827 : Loading checkpoint...
2024-04-23 11:43:50,994 : Load checkpoint from ckpts/ttm/lyric2song_chinese/checkpoint/epoch-0044_step-0074000_loss-4.370575
2024-04-23 11:43:50,994 : Loading checkpoint done in 1166.853ms
args:  Namespace(config='egs/ttm/lyricgen/exp_config_chinese.json', text='/home/wangyuancheng.p/zja/Amphion/ckpts/ttm/lyric2song_chinese/debug_train_sample/info.txt', waveform='', infer_expt_dir='ckpts/ttm/lyric2song_chinese', output_dir='ckpts/ttm/lyric2song_chinese/result', file_list=True, mix=False, local_rank=device(type='cuda'))
Generating:   0%|          | 0/8 [00:00<?, ?it/s]Generating:  12%|█▎        | 1/8 [00:24<02:48, 24.05s/it]Generating:  25%|██▌       | 2/8 [00:44<02:13, 22.19s/it]Generating:  38%|███▊      | 3/8 [01:06<01:49, 21.88s/it]Generating:  50%|█████     | 4/8 [01:29<01:29, 22.38s/it]Generating:  62%|██████▎   | 5/8 [01:51<01:06, 22.07s/it]Generating:  75%|███████▌  | 6/8 [02:12<00:43, 21.95s/it]Generating:  88%|████████▊ | 7/8 [02:35<00:22, 22.12s/it]Generating: 100%|██████████| 8/8 [02:55<00:00, 21.49s/it]Generating: 100%|██████████| 8/8 [02:55<00:00, 21.93s/it]
['想带着你去迪士尼耍痛快\\n在国内或者国外\\n你看上的项链我全都给你买\\n亲手给你脖子戴']
None
111
["你哭着对我说你想去迪士尼想看看唐老鸭米妮米奇\\n那择日不如撞日baby let's ride\\n我不忍心你呆在小区里\\n除了整活就是刷抖音\\n希望你没有我也能过得开心"]
None
111
['你说你的梦想是去迪士尼\\n压力大你想散个心\\n雨下得大啥都看不清\\n这场比赛根本打不赢\\n于是我们说走就走\\n太阳落山了以后\\n棒球帽下是你的头\\n没洗也特别的油\\n我们要在打烊之前买两杯黄油啤酒\\n这过山车有点惊险我牵着你颤抖的手']
None
111
['有人说不行就不要勉强了\\n哥们眼神有点慌了\\n月亮还在天上躺着\\n出了问题自己扛着\\n离开我们的破房子\\n光鲜亮丽假的样子\\n迪士尼耍得太爽了\\n迪士尼耍得太爽了\\n想带着你去迪士尼耍痛快\\n在国内或者国外']
None
111
["你看上的项链我全都给你买\\n亲手给你脖子戴\\n你哭着对我说你想去迪士尼想看看唐老鸭米妮米奇\\n那择日不如撞日baby let's ride"]
None
111
['MR.ENJOYDAMONEY']
None
111
['这晚风吹起后 回忆痛在心里\\n对那面容 却依然的清晰\\n把我的温柔 全都存下来给你']
None
111
['这能否只是一场电影\\n我不想要的生活 不想要的梦\\n不想要的感觉 只希望你能别走\\n却是我的记忆\\n你对着我 是你对着我\\n说不再难过']
None
111
Traceback (most recent call last):
  File "/home/wangyuancheng.p/zja/Amphion/bins/ttm/inference.py", line 98, in <module>
    main()
  File "/home/wangyuancheng.p/zja/Amphion/bins/ttm/inference.py", line 94, in main
    inferencer.inference()
  File "/home/wangyuancheng.p/zja/Amphion/models/ttm/musicgen/musicgen_inference.py", line 373, in inference
    torchaudio.save(file, audio.cpu(), self.sample_rate)
  File "/home/wangyuancheng.p/miniconda3/envs/amphion_music/lib/python3.9/site-packages/torchaudio/backend/sox_io_backend.py", line 429, in save
    torch.ops.torchaudio.sox_io_save_audio_file(
  File "/home/wangyuancheng.p/miniconda3/envs/amphion_music/lib/python3.9/site-packages/torch/_ops.py", line 502, in __call__
    return self._op(*args, **kwargs or {})
RuntimeError: Error saving audio file: failed to open file ckpts/ttm/lyric2song_chinese/result/epoch-0044_step-0074000_loss-4.370575/你说你的梦想是去迪士尼\n压力大你想散个心\n雨下得大啥都看不清\n这场比赛根本打不赢\n于是我们说走就走\n太阳落山了以后\n棒球帽下是你的头\n没洗也特别的油\n我们要在打烊之前买两杯黄油啤酒\n.wav
Traceback (most recent call last):
  File "/home/wangyuancheng.p/miniconda3/envs/amphion_music/bin/accelerate", line 8, in <module>
    sys.exit(main())
  File "/home/wangyuancheng.p/miniconda3/envs/amphion_music/lib/python3.9/site-packages/accelerate/commands/accelerate_cli.py", line 47, in main
    args.func(args)
  File "/home/wangyuancheng.p/miniconda3/envs/amphion_music/lib/python3.9/site-packages/accelerate/commands/launch.py", line 994, in launch_command
    simple_launcher(args)
  File "/home/wangyuancheng.p/miniconda3/envs/amphion_music/lib/python3.9/site-packages/accelerate/commands/launch.py", line 636, in simple_launcher
    raise subprocess.CalledProcessError(returncode=process.returncode, cmd=cmd)
subprocess.CalledProcessError: Command '['/home/wangyuancheng.p/miniconda3/envs/amphion_music/bin/python', '/home/wangyuancheng.p/zja/Amphion/bins/ttm/inference.py', '--config', 'egs/ttm/lyricgen/exp_config_chinese.json', '--infer_expt_dir', 'ckpts/ttm/lyric2song_chinese', '--output_dir', 'ckpts/ttm/lyric2song_chinese/result', '--text=/home/wangyuancheng.p/zja/Amphion/ckpts/ttm/lyric2song_chinese/debug_train_sample/info.txt', '--waveform=', '--file_list']' returned non-zero exit status 1.
Exprimental Configuration File: egs/ttm/lyricgen/exp_config_chinese.json
egs/ttm/lyricgen/run.sh: line 126: waveform: command not found
The following values were not passed to `accelerate launch` and had defaults used instead:
	`--num_processes` was set to a value of `1`
	`--num_machines` was set to a value of `1`
	`--mixed_precision` was set to a value of `'no'`
	`--dynamo_backend` was set to a value of `'no'`
To avoid this warning pass in values for each of the problematic parameters or run `accelerate config`.
2024-04-23 11:51:05,672 : ==========================New Starting Here==============================
2024-04-23 11:51:11,416 : Compression model has 4 codebooks with 2048 cardinality, and a framerate of 50
2024-04-23 11:51:14,396 : Initializing accelerate...
Detected kernel version 3.10.0, which is below the recommended minimum of 5.5.0; this can cause the process to hang. It is recommended to upgrade the kernel to the minimum version or higher.
2024-04-23 11:51:14,410 : Initializing accelerate done in 13.282ms
2024-04-23 11:51:14,410 : Loading checkpoint...
2024-04-23 11:51:15,324 : Load checkpoint from ckpts/ttm/lyric2song_chinese/checkpoint/epoch-0045_step-0074500_loss-4.384139
2024-04-23 11:51:15,325 : Loading checkpoint done in 914.852ms
args:  Namespace(config='egs/ttm/lyricgen/exp_config_chinese.json', text='/home/wangyuancheng.p/zja/Amphion/ckpts/ttm/lyric2song_chinese/debug_train_sample/info.txt', waveform='', infer_expt_dir='ckpts/ttm/lyric2song_chinese', output_dir='ckpts/ttm/lyric2song_chinese/result', file_list=True, mix=False, local_rank=device(type='cuda'))
Generating:   0%|          | 0/8 [00:00<?, ?it/s]Generating:  12%|█▎        | 1/8 [00:23<02:47, 23.91s/it]Generating:  25%|██▌       | 2/8 [00:45<02:13, 22.31s/it]Generating:  38%|███▊      | 3/8 [01:06<01:49, 21.84s/it]Generating:  50%|█████     | 4/8 [01:28<01:28, 22.02s/it]Generating:  62%|██████▎   | 5/8 [01:49<01:04, 21.65s/it]Generating:  75%|███████▌  | 6/8 [02:11<00:43, 21.75s/it]Generating:  88%|████████▊ | 7/8 [02:32<00:21, 21.50s/it]Generating: 100%|██████████| 8/8 [02:53<00:00, 21.38s/it]Generating: 100%|██████████| 8/8 [02:53<00:00, 21.71s/it]
['想带着你去迪士尼耍痛快\\n在国内或者国外\\n你看上的项链我全都给你买\\n亲手给你脖子戴']
None
111
["你哭着对我说你想去迪士尼想看看唐老鸭米妮米奇\\n那择日不如撞日baby let's ride\\n我不忍心你呆在小区里\\n除了整活就是刷抖音\\n希望你没有我也能过得开心"]
None
111
['你说你的梦想是去迪士尼\\n压力大你想散个心\\n雨下得大啥都看不清\\n这场比赛根本打不赢\\n于是我们说走就走\\n太阳落山了以后\\n棒球帽下是你的头\\n没洗也特别的油\\n我们要在打烊之前买两杯黄油啤酒\\n这过山车有点惊险我牵着你颤抖的手']
None
111
['有人说不行就不要勉强了\\n哥们眼神有点慌了\\n月亮还在天上躺着\\n出了问题自己扛着\\n离开我们的破房子\\n光鲜亮丽假的样子\\n迪士尼耍得太爽了\\n迪士尼耍得太爽了\\n想带着你去迪士尼耍痛快\\n在国内或者国外']
None
111
["你看上的项链我全都给你买\\n亲手给你脖子戴\\n你哭着对我说你想去迪士尼想看看唐老鸭米妮米奇\\n那择日不如撞日baby let's ride"]
None
111
['MR.ENJOYDAMONEY']
None
111
['这晚风吹起后 回忆痛在心里\\n对那面容 却依然的清晰\\n把我的温柔 全都存下来给你']
None
111
['这能否只是一场电影\\n我不想要的生活 不想要的梦\\n不想要的感觉 只希望你能别走\\n却是我的记忆\\n你对着我 是你对着我\\n说不再难过']
None
111
Exprimental Configuration File: egs/ttm/lyricgen/exp_config_chinese.json
egs/ttm/lyricgen/run.sh: line 126: waveform: command not found
The following values were not passed to `accelerate launch` and had defaults used instead:
	`--num_processes` was set to a value of `1`
	`--num_machines` was set to a value of `1`
	`--mixed_precision` was set to a value of `'no'`
	`--dynamo_backend` was set to a value of `'no'`
To avoid this warning pass in values for each of the problematic parameters or run `accelerate config`.
2024-04-23 11:54:47,240 : ==========================New Starting Here==============================
2024-04-23 11:54:52,571 : Compression model has 4 codebooks with 2048 cardinality, and a framerate of 50
2024-04-23 11:54:55,830 : Initializing accelerate...
Detected kernel version 3.10.0, which is below the recommended minimum of 5.5.0; this can cause the process to hang. It is recommended to upgrade the kernel to the minimum version or higher.
2024-04-23 11:54:55,844 : Initializing accelerate done in 13.241ms
2024-04-23 11:54:55,844 : Loading checkpoint...
2024-04-23 11:54:56,772 : Load checkpoint from ckpts/ttm/lyric2song_chinese/checkpoint/epoch-0045_step-0074500_loss-4.384139
2024-04-23 11:54:56,772 : Loading checkpoint done in 927.679ms
args:  Namespace(config='egs/ttm/lyricgen/exp_config_chinese.json', text='/home/wangyuancheng.p/zja/Amphion/ckpts/ttm/lyric2song_chinese/debug_train_sample/info.txt', waveform='', infer_expt_dir='ckpts/ttm/lyric2song_chinese', output_dir='ckpts/ttm/lyric2song_chinese/result', file_list=True, mix=False, local_rank=device(type='cuda'))
Generating:   0%|          | 0/8 [00:00<?, ?it/s]Generating:  12%|█▎        | 1/8 [00:23<02:42, 23.28s/it]Generating:  12%|█▎        | 1/8 [00:44<05:13, 44.79s/it]
['想带着你去迪士尼耍痛快\\n在国内或者国外\\n你看上的项链我全都给你买\\n亲手给你脖子戴']
None
111
["你哭着对我说你想去迪士尼想看看唐老鸭米妮米奇\\n那择日不如撞日baby let's ride\\n我不忍心你呆在小区里\\n除了整活就是刷抖音\\n希望你没有我也能过得开心"]
None
111
Traceback (most recent call last):
  File "/home/wangyuancheng.p/zja/Amphion/bins/ttm/inference.py", line 98, in <module>
    main()
  File "/home/wangyuancheng.p/zja/Amphion/bins/ttm/inference.py", line 94, in main
    inferencer.inference()
  File "/home/wangyuancheng.p/zja/Amphion/models/ttm/musicgen/musicgen_inference.py", line 373, in inference
    f.write(batch_text[i])
IndexError: list index out of range
Traceback (most recent call last):
  File "/home/wangyuancheng.p/miniconda3/envs/amphion_music/bin/accelerate", line 8, in <module>
    sys.exit(main())
  File "/home/wangyuancheng.p/miniconda3/envs/amphion_music/lib/python3.9/site-packages/accelerate/commands/accelerate_cli.py", line 47, in main
    args.func(args)
  File "/home/wangyuancheng.p/miniconda3/envs/amphion_music/lib/python3.9/site-packages/accelerate/commands/launch.py", line 994, in launch_command
    simple_launcher(args)
  File "/home/wangyuancheng.p/miniconda3/envs/amphion_music/lib/python3.9/site-packages/accelerate/commands/launch.py", line 636, in simple_launcher
    raise subprocess.CalledProcessError(returncode=process.returncode, cmd=cmd)
subprocess.CalledProcessError: Command '['/home/wangyuancheng.p/miniconda3/envs/amphion_music/bin/python', '/home/wangyuancheng.p/zja/Amphion/bins/ttm/inference.py', '--config', 'egs/ttm/lyricgen/exp_config_chinese.json', '--infer_expt_dir', 'ckpts/ttm/lyric2song_chinese', '--output_dir', 'ckpts/ttm/lyric2song_chinese/result', '--text=/home/wangyuancheng.p/zja/Amphion/ckpts/ttm/lyric2song_chinese/debug_train_sample/info.txt', '--waveform=', '--file_list']' returned non-zero exit status 1.
Exprimental Configuration File: egs/ttm/lyricgen/exp_config_chinese.json
egs/ttm/lyricgen/run.sh: line 126: waveform: command not found
The following values were not passed to `accelerate launch` and had defaults used instead:
	`--num_processes` was set to a value of `1`
	`--num_machines` was set to a value of `1`
	`--mixed_precision` was set to a value of `'no'`
	`--dynamo_backend` was set to a value of `'no'`
To avoid this warning pass in values for each of the problematic parameters or run `accelerate config`.
2024-04-23 11:56:08,443 : ==========================New Starting Here==============================
2024-04-23 11:56:14,239 : Compression model has 4 codebooks with 2048 cardinality, and a framerate of 50
2024-04-23 11:56:17,311 : Initializing accelerate...
Detected kernel version 3.10.0, which is below the recommended minimum of 5.5.0; this can cause the process to hang. It is recommended to upgrade the kernel to the minimum version or higher.
2024-04-23 11:56:17,323 : Initializing accelerate done in 12.185ms
2024-04-23 11:56:17,323 : Loading checkpoint...
2024-04-23 11:56:18,256 : Load checkpoint from ckpts/ttm/lyric2song_chinese/checkpoint/epoch-0045_step-0074500_loss-4.384139
2024-04-23 11:56:18,256 : Loading checkpoint done in 932.924ms
args:  Namespace(config='egs/ttm/lyricgen/exp_config_chinese.json', text='/home/wangyuancheng.p/zja/Amphion/ckpts/ttm/lyric2song_chinese/debug_train_sample/info.txt', waveform='', infer_expt_dir='ckpts/ttm/lyric2song_chinese', output_dir='ckpts/ttm/lyric2song_chinese/result', file_list=True, mix=False, local_rank=device(type='cuda'))
Generating:   0%|          | 0/8 [00:00<?, ?it/s]Generating:  12%|█▎        | 1/8 [00:22<02:35, 22.20s/it]Generating:  25%|██▌       | 2/8 [00:42<02:05, 20.96s/it]Generating:  38%|███▊      | 3/8 [01:03<01:45, 21.15s/it]Generating:  50%|█████     | 4/8 [01:24<01:24, 21.09s/it]Generating:  62%|██████▎   | 5/8 [01:44<01:02, 20.71s/it]Generating:  75%|███████▌  | 6/8 [02:05<00:41, 20.72s/it]Generating:  88%|████████▊ | 7/8 [02:26<00:20, 20.68s/it]Generating: 100%|██████████| 8/8 [02:46<00:00, 20.58s/it]Generating: 100%|██████████| 8/8 [02:46<00:00, 20.80s/it]
['想带着你去迪士尼耍痛快\\n在国内或者国外\\n你看上的项链我全都给你买\\n亲手给你脖子戴']
None
111
["你哭着对我说你想去迪士尼想看看唐老鸭米妮米奇\\n那择日不如撞日baby let's ride\\n我不忍心你呆在小区里\\n除了整活就是刷抖音\\n希望你没有我也能过得开心"]
None
111
['你说你的梦想是去迪士尼\\n压力大你想散个心\\n雨下得大啥都看不清\\n这场比赛根本打不赢\\n于是我们说走就走\\n太阳落山了以后\\n棒球帽下是你的头\\n没洗也特别的油\\n我们要在打烊之前买两杯黄油啤酒\\n这过山车有点惊险我牵着你颤抖的手']
None
111
['有人说不行就不要勉强了\\n哥们眼神有点慌了\\n月亮还在天上躺着\\n出了问题自己扛着\\n离开我们的破房子\\n光鲜亮丽假的样子\\n迪士尼耍得太爽了\\n迪士尼耍得太爽了\\n想带着你去迪士尼耍痛快\\n在国内或者国外']
None
111
["你看上的项链我全都给你买\\n亲手给你脖子戴\\n你哭着对我说你想去迪士尼想看看唐老鸭米妮米奇\\n那择日不如撞日baby let's ride"]
None
111
['MR.ENJOYDAMONEY']
None
111
['这晚风吹起后 回忆痛在心里\\n对那面容 却依然的清晰\\n把我的温柔 全都存下来给你']
None
111
['这能否只是一场电影\\n我不想要的生活 不想要的梦\\n不想要的感觉 只希望你能别走\\n却是我的记忆\\n你对着我 是你对着我\\n说不再难过']
None
111
